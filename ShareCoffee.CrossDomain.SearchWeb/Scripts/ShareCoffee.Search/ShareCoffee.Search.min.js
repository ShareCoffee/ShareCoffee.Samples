/* ShareCoffee.Search (c) 2013 Thorsten Hans | dotnet-rocks.com | https://github.com/ThorstenHans/ShareCoffee.Search/ | under MIT License | */(function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}};if(a="undefined"!=typeof global&&null!==global?global:window,null==a.ShareCoffee)throw new Error("LoadError");a.ShareCoffee.MaxUrlLength=2e3,null==a.ShareCoffee.Url&&(a.ShareCoffee.Url={}),a.ShareCoffee.Url.Query="Search/query",a.ShareCoffee.Url.PostQuery="Search/postquery",a.ShareCoffee.Url.Suggest="Search/suggest",a.ShareCoffee.QueryProperties=function(){function a(a,c,d){this.querytext=a,this.selectproperties=c,this.querytemplate=d,this.validateUrl=b(this.validateUrl,this),this.getRequestProperties=b(this.getRequestProperties,this),this.getUrl=b(this.getUrl,this),null==this.querytext&&(this.querytext=null),this.isPostQuery=!1,null==this.querytemplate&&(this.querytemplate=null),null==this.enableinterleaving&&(this.enableinterleaving=null),null==this.sourceid&&(this.sourceid=null),null==this.rankingmodelid&&(this.rankingmodelid=null),null==this.startrow&&(this.startrow=null),null==this.rowlimit&&(this.rowlimit=null),null==this.rowsperpage&&(this.rowsperpage=null),null==this.selectproperties&&(this.selectproperties=null),null==this.culture&&(this.culture=null),null==this.refiners&&(this.refiners=null),null==this.refinementfilters&&(this.refinementfilters=null),null==this.hiddenconstraints&&(this.hiddenconstraints=null),null==this.sortlist&&(this.sortlist=null),null==this.enablestemming&&(this.enablestemming=null),null==this.trimduplicates&&(this.trimduplicates=null),null==this.trimduplicatesincludeid&&(this.trimduplicatesincludeid=null),null==this.timeout&&(this.timeout=null),null==this.enablenicknames&&(this.enablenicknames=null),null==this.enablephonetic&&(this.enablephonetic=null),null==this.enablefql&&(this.enablefql=null),null==this.hithighlightedproperties&&(this.hithighlightedproperties=null),null==this.bypassresulttypes&&(this.bypassresulttypes=null),null==this.processbestbets&&(this.processbestbets=null),null==this.clienttype&&(this.clienttype=null),null==this.personalizationdata&&(this.personalizationdata=null),null==this.resultsurl&&(this.resultsurl=null),null==this.querytag&&(this.querytag=null),null==this.enablequeryrules&&(this.enablequeryrules=null),null==this.enablesorting&&(this.enablesorting=null),this.hostWebUrl=null,this.onSuccess=null,this.onError=null}return a.prototype.getUrl=function(){var a,b,c,d,e;e=["querytext","querytemplate","enableinterleaving","sourceid","rankingmodelid","startrow","rowlimit","rowsperpage","selectproperties","culture","refiners","refinementfilters","hiddenconstraints","sortlist","enablestemming","trimduplicates","trimduplicatesincludeid","timeout","enablenicknames","enablephonetic","enablefql","hithighlightedproperties","bypassresulttypes","processbestbets","clienttype","personalizationdata","resultsurl","querytag","enablequeryrules","enablesorting"],a=function(a){return encodeURIComponent(a.replace(/'/g,'"'))},d=""+ShareCoffee.Url.Query+"?";for(b in this)c=this[b],e.indexOf(b)>-1&&null!=c&&("string"==typeof c?d=""+d+b+"='"+a(c)+"'&":("number"==typeof c||"boolean"==typeof c)&&(d=""+d+b+"="+c+"&"));return d.substr(0,d.length-1)},a.prototype.getRequestProperties=function(){return this.validateUrl(),new ShareCoffee.REST.RequestProperties(this.getUrl(),null,this.hostWebUrl,null,this.onSuccess,this.onError)},a.prototype.validateUrl=function(){var a;if(a="",a=null!=this.hostWebUrl?""+ShareCoffee.Commons.getApiRootUrl()+"SP.AppContextSite(@target)/"+this.getUrl()+"?@target='"+this.hostWebUrl+"'":""+ShareCoffee.Commons.getApiRootUrl()+this.getUrl(),a.length>ShareCoffee.MaxUrlLength)throw new Error("URL is to long, please use a PostQuery instead of a regular GET Query")},a}(),a.ShareCoffee.PostQueryProperties=function(){function a(a,b,c){this.Querytext=a,this.SelectProperties=b,this.QueryTemplate=c,this.isPostQuery=!0,null==this.Querytext&&(this.Querytext=null),null==this.Culture&&(this.Culture=null),null==this.EnableIterleaving&&(this.EnableIterleaving=null),null==this.EnableNicknames&&(this.EnableNicknames=null),null==this.EnablePhonetic&&(this.EnablePhonetic=null),null==this.EnableStemming&&(this.EnableStemming=null),null==this.HiddenConstraints&&(this.HiddenConstraints=null),null==this.RankingModelId&&(this.RankingModelId=null),null==this.RefinementFilters&&(this.RefinementFilters=null),null==this.Refiners&&(this.Refiners=null),null==this.RowLimit&&(this.RowLimit=null),null==this.RowsPerPage&&(this.RowsPerPage=null),null==this.SelectProperties&&(this.SelectProperties=null),null==this.SourceId&&(this.SourceId=null),null==this.StartRow&&(this.StartRow=null),null==this.Timeout&&(this.Timeout=null),null==this.TrimDuplicates&&(this.TrimDuplicates=null),null==this.EnableFQL&&(this.EnableFQL=null),null==this.BypassResultTypes&&(this.BypassResultTypes=null),null==this.ClientType&&(this.ClientType=null),null==this.HitHighlightedProperties&&(this.HitHighlightedProperties=null),null==this.ProcessBestBets&&(this.ProcessBestBets=null),null==this.QueryTag&&(this.QueryTag=null),null==this.ResultsUrl&&(this.ResultsUrl=null),null==this.TrimDuplicatesIncludeId&&(this.TrimDuplicatesIncludeId=null),null==this.BlockDedupeMode&&(this.BlockDedupeMode=null),null==this.CollapseSpecification&&(this.CollapseSpecification=null),null==this.DesiredSnippetLength&&(this.DesiredSnippetLength=null),null==this.EnableOrderingHitHighlightedProperty&&(this.EnableOrderingHitHighlightedProperty=null),null==this.EnableQueryRules&&(this.EnableQueryRules=null),null==this.EnableSorting&&(this.EnableSorting=null),null==this.GenerateBlockRankLog&&(this.GenerateBlockRankLog=null),null==this.HitHighlightedMultivaluePropertyLimit&&(this.HitHighlightedMultivaluePropertyLimit=null),null==this.ImpressionId&&(this.ImpressionId=null),null==this.MaxSnippetLength&&(this.MaxSnippetLength=null),null==this.PersonalizationData&&(this.PersonalizationData=null),null==this.ProcessPersonalFavorites&&(this.ProcessPersonalFavorites=null),null==this.Properties&&(this.Properties=null),null==this.QueryTemplate&&(this.QueryTemplate=null),null==this.ReorderingRules&&(this.ReorderingRules=null),null==this.SortList&&(this.SortList=null),null==this.SummaryLength&&(this.SummaryLength=null),null==this.TotalRowsExactMinimum&&(this.TotalRowsExactMinimum=null),null==this.UILanguage&&(this.UILanguage=null),null==this.QueryTemplatePropertiesUrl&&(this.QueryTemplatePropertiesUrl=null)}return a.prototype.getRequestProperties=function(){var a,b,c,d;b={request:{}},d=["Querytext","Culture","EnableIterleaving","EnableNicknames","EnablePhonetic","EnableStemming","HiddenConstraints","RankingModelId","RefinementFilters","Refiners","RowLimit","RowsPerPage","SelectProperties","SourceId","StartRow","Timeout","TrimDuplicates","EnableFQL","BypassResultTypes","ClientType","HitHighlightedProperties","ProcessBestBets","QueryTag","ResultsUrl","TrimDuplicatesIncludeId","BlockDedupeMode","CollapseSpecification","DesiredSnippetLength","EnableOrderingHitHighlightedProperty","EnableQueryRules","EnableSorting","GenerateBlockRankLog","HitHighlightedMultivaluePropertyLimit","ImpressionId","MaxSnippetLength","PersonalizationData","ProcessPersonalFavorites","Properties","QueryTemplate","ReorderingRules","SortList","SummaryLength","TotalRowsExactMinimum","UILanguage","QueryTemplatePropertiesUrl"];for(a in this)c=this[a],d.indexOf(a)>-1&&null!=c&&(b.request[a]=this[a]);return new ShareCoffee.REST.RequestProperties(ShareCoffee.Url.PostQuery,b,this.hostWebUrl,null,this.onSuccess,this.onError)},a}(),a.ShareCoffee.SuggestProperties=function(){function a(a,c,d,e,f,g,h,i){this.querytext=a,this.inumberofquerysuggestions=c,this.inumberofresultsuggestions=d,this.fprequerysuggestions=e,this.fhithighlighting=f,this.fcapitalizefirstletters=g,this.showpeoplenamesuggestions=h,this.culture=i,this.getUrl=b(this.getUrl,this),this.getRequestProperties=b(this.getRequestProperties,this),null==this.querytext&&(this.querytext=null),null==this.inumberofquerysuggestions&&(this.inumberofquerysuggestions=null),null==this.inumberofresultsuggestions&&(this.inumberofresultsuggestions=null),null==this.fprequerysuggestions&&(this.fprequerysuggestions=null),null==this.fhithighlighting&&(this.fhithighlighting=null),null==this.fcapitalizefirstletters&&(this.fcapitalizefirstletters=null),null==this.showpeoplenamesuggestions&&(this.showpeoplenamesuggestions=null),null==this.culture&&(this.culture=null),this.hostWebUrl=null,this.onSuccess=null,this.onError=null}return a.prototype.getRequestProperties=function(){return new ShareCoffee.REST.RequestProperties(this.getUrl(),null,this.hostWebUrl,null,this.onSuccess,this.onError)},a.prototype.getUrl=function(){var a,b,c,d,e;e=["querytext","inumberofquerysuggestions","inumberofresultsuggestions","fprequerysuggestions","fhithighlighting","fcapitalizefirstletters","showpeoplenamesuggestions","culture"],d=""+ShareCoffee.Url.Suggest+"?",a=function(a){return encodeURIComponent(a.replace(/'/g,'"'))};for(b in this)c=this[b],e.indexOf(b)>-1&&null!=c&&("string"==typeof c?d=""+d+b+"='"+a(c)+"'&":("number"==typeof c||"boolean"==typeof c)&&(d=""+d+b+"="+c+"&"));return d.substr(0,d.length-1)},a}()}).call(this);